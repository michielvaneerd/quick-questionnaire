!function(){"use strict";var e={};function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},t.apply(this,arguments)}e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},e.d=function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var n=window.wp.element,o=window.wp.blockEditor,i=window.wp.components,r=window.wp.blocks,l=window.wp.domReady,a=e.n(l),c=window.wp.primitives,s=(0,n.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(c.Path,{d:"M16 11.2h-3.2V8h-1.6v3.2H8v1.6h3.2V16h1.6v-3.2H16z"}));const u=["checkbox","radio"];a()((function(){window.qq_all_posts||"quick-questionnaire"===window.qq_my_post_type||(0,r.unregisterBlockType)("quick-questionnaire/list")}));const d={open:!1,type:null,question:"",answers:[""]},p={text:"Case sensitive text",itext:"Case insensitive text",radio:"Radio",checkbox:"Checkbox",reg:"Regular expression"};let w=null;(0,r.registerBlockType)("quick-questionnaire/list",{edit:function(e){const{attributes:r,setAttributes:l}=e,{showButton:a,ordered:c,qqId:m}=r,h=(0,o.useBlockProps)({className:"quick-questionnaire-enabled"}),[q,k]=(0,n.useState)({...d});function C(e){w=window.getSelection().getRangeAt(0),k({...d,type:e,open:!0})}(0,n.useEffect)((()=>{l({qqId:m||Date.now()})}),[]);const f=q.open?(e=>{const{title:t,answers:o,setAnswers:r,question:l,setQuestion:a,onModalClose:c,closeModal:s,type:d}=e;return(0,n.createElement)(i.Modal,{title:t,onRequestClose:s},(0,n.createElement)(i.TextControl,{autoFocus:""===l||0===o.length,label:"Question",value:l,onChange:e=>a(e)}),o.map(((e,t)=>(0,n.createElement)(i.TextControl,{label:"Answer",autoFocus:""!==l&&t===o.length-1,key:t,value:e,onChange:e=>{!function(e,t){let n=[...o];n[e]=t,r(n)}(t,e)}}))),-1!==u.indexOf(d)&&(0,n.createElement)(i.Button,{variant:"link",onClick:()=>r(o.concat("")),text:"Add answer"}),(0,n.createElement)(i.__experimentalHStack,{alignment:"right"},(0,n.createElement)(i.Button,{variant:"primary",onClick:c},"OK")))})({title:p[q.type],answers:q.answers,setAnswers:function(e){k({...q,answers:e})},question:q.question,setQuestion:function(e){k({...q,question:e})},closeModal:function(){k({...d})},onModalClose:function(){if(!w)return l({content:r.content+"<li>"+q.question+" {"+q.type+"{ "+q.answers.join(" | ")+" }}</li>"}),void k({...d});const e=w.startContainer.parentElement,t=e.parentElement,n=Array.prototype.indexOf.call(t.children,e),o=document.createDocumentFragment();o.appendChild(t.cloneNode(!0));const i=o.firstChild;if(e.innerHTML.trim()){let e=document.createElement("li");e.innerHTML=q.question+" {"+q.type+"{ "+q.answers.join(" | ")+" }}",n+1===i.children.length?i.appendChild(e):i.insertBefore(e,i.children[n+1])}else i.children[n].innerHTML=q.question+" {"+q.type+"{ "+q.answers.join(" | ")+" }}";l({content:i.innerHTML}),k({...d})},type:q.type}):null,b=[{title:p.text,onClick:()=>C("text")},{title:p.itext,onClick:()=>C("itext")},{title:p.radio,onClick:()=>C("radio")},{title:p.checkbox,onClick:()=>C("checkbox")},{title:p.reg,onClick:()=>C("reg")}];return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(o.RichText,t({},h,{tagName:c?"ol":"ul",multiline:"li",value:r.content,onChange:e=>l({content:e})})),(0,n.createElement)(o.InspectorControls,null,(0,n.createElement)(i.PanelBody,{title:"Quick Questionnaire"},(0,n.createElement)(i.CheckboxControl,{label:"Show button",checked:a,onChange:e=>{l({showButton:e})}}),(0,n.createElement)(i.CheckboxControl,{label:"Ordered",checked:c,onChange:e=>{l({ordered:e})}}))),(0,n.createElement)(o.BlockControls,null,(0,n.createElement)(i.ToolbarGroup,null,(0,n.createElement)(i.ToolbarDropdownMenu,{icon:s,label:"Add new question",controls:b}))),f)},save:function(e){const{attributes:i}=e,{showButton:r,ordered:l,qqId:a}=i,c=o.useBlockProps.save();return(0,n.createElement)(o.RichText.Content,t({},c,{"data-qq-show-button":r||null,"data-qq-id":i.qqId,tagName:l?"ol":"ul",className:"quick-questionnaire-enabled",value:i.content}))}})}();